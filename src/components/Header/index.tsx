"use client";
import { useEffect, useState } from "react";
import Link from "next/link";

import MenuIcon from "../Icons/MenuIcon";
import { debounce, throttle } from "../../../utils/utils";

import Navigation from "./Navigation";

const Header = () => {
  const [openMenu, setOpenMenu] = useState(true);
  const handleOpenMenu = () => {
    setOpenMenu(!openMenu);
  };
  const [transparency, setTransparency] = useState(0.0);
  function handleScroll() {
    if (window.pageYOffset > 500) {
      setTransparency(1);
    } else {
      setTransparency(window.pageYOffset / 500.0);
    }
  }
  useEffect(() => {
    window.addEventListener("scroll", throttle(debounce(handleScroll)));
    return () =>
      window.removeEventListener("scroll", throttle(debounce(handleScroll)));
  }, []);

  useEffect(() => {
    if (window.innerWidth < 600) {
      setOpenMenu(false);
    }
  }, []);
  return (
    <>
      <header className="sticky left-0 right-0 top-0 z-20 py-5 ">
        <div
          className={`container mx-auto flex  h-[40px] items-center justify-between ${
            openMenu && "rounded-b-none rounded-t-3xl md:rounded-3xl"
          }  rounded-3xl bg-header bg-opacity-80 p-8  ${
            transparency != 0 && "backdrop-blur-xl "
          } relative`}
        >
          <Link href="/">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="162"
              height="40"
              viewBox="0 0 162 40"
              fill="none"
            >
              <g clipPath="url(#clip0_519_130)">
                <path
                  d="M85.5357 2.8269C84.1854 1.47612 82.4648 0.556195 80.5915 0.183456C78.7183 -0.189282 76.7766 0.00192072 75.012 0.732896C73.2474 1.46387 71.7393 2.70177 70.6784 4.28999C69.6175 5.87822 69.0515 7.74542 69.0519 9.65539L60.4694 9.11898L88.3626 18.954V9.65539C88.3641 8.38715 88.1151 7.1311 87.63 5.9593C87.1449 4.7875 86.4332 3.723 85.5357 2.8269ZM76.685 8.52624C76.4697 8.52571 76.2595 8.4614 76.0808 8.34143C75.902 8.22145 75.7629 8.05121 75.6809 7.8522C75.5989 7.65318 75.5777 7.43432 75.62 7.22326C75.6623 7.01221 75.7663 6.81844 75.9187 6.66643C76.071 6.51441 76.2651 6.41096 76.4762 6.36916C76.6874 6.32737 76.9062 6.34909 77.105 6.43158C77.3038 6.51408 77.4737 6.65363 77.5933 6.83265C77.7128 7.01166 77.7766 7.22208 77.7766 7.43733C77.7766 7.5817 77.7479 7.72462 77.6922 7.85779C77.6365 7.99097 77.5548 8.11173 77.452 8.21305C77.3492 8.31438 77.2272 8.39426 77.0932 8.44803C76.9593 8.50179 76.8159 8.52838 76.6716 8.52624H76.685ZM83.2238 8.52624C83.0086 8.52571 82.7983 8.4614 82.6196 8.34143C82.4409 8.22145 82.3017 8.05121 82.2197 7.8522C82.1377 7.65318 82.1165 7.43432 82.1588 7.22326C82.2012 7.01221 82.3051 6.81844 82.4575 6.66643C82.6099 6.51441 82.8039 6.41096 83.0151 6.36916C83.2262 6.32737 83.445 6.34909 83.6438 6.43158C83.8426 6.51408 84.0125 6.65363 84.1321 6.83265C84.2516 7.01166 84.3154 7.22208 84.3154 7.43733C84.3154 7.5817 84.2867 7.72462 84.231 7.85779C84.1753 7.99097 84.0936 8.11173 83.9908 8.21305C83.888 8.31438 83.766 8.39426 83.6321 8.44803C83.4981 8.50179 83.3548 8.52838 83.2104 8.52624H83.2238Z"
                  fill="url(#paint0_linear_519_130)"
                />
                <path
                  d="M69.0519 14.4642L91.0768 22.1027V23.7709L88.3626 23.602C88.3626 26.1627 87.3453 28.6186 85.5346 30.4293C83.7239 32.2401 81.268 33.2573 78.7072 33.2573C76.1465 33.2573 73.6906 32.2401 71.8799 30.4293C70.0691 28.6186 69.0519 26.1627 69.0519 23.602V14.4642Z"
                  fill="url(#paint1_linear_519_130)"
                />
                <path
                  d="M22.6901 14.99C22.0606 13.4862 21.119 12.1333 19.9276 11.0205C18.7012 9.89119 17.2613 9.0185 15.6926 8.45382C13.9682 7.8349 12.1471 7.52882 10.3151 7.54998H0V32.7022H10.2374C12.092 32.7244 13.9355 32.4118 15.6792 31.7796C17.2561 31.2057 18.7017 30.321 19.9303 29.178C21.1192 28.0568 22.0602 26.6992 22.6928 25.1925C23.9882 21.9187 23.9882 18.2745 22.6928 15.0007L22.6901 14.99ZM16.3846 23.9158C15.7921 24.9672 14.9057 25.8229 13.834 26.3779C12.6196 26.9838 11.2749 27.2822 9.9182 27.2469H6.16334V13.0052H9.9182C11.2749 12.9699 12.6196 13.2683 13.834 13.8742C14.9063 14.4283 15.793 15.2842 16.3846 16.3363C16.9788 17.5113 17.2884 18.8094 17.2884 20.1261C17.2884 21.4427 16.9788 22.7409 16.3846 23.9158Z"
                  fill="white"
                />
                <path
                  d="M45.1656 23.492C45.1839 22.0698 44.9561 20.6552 44.4924 19.3107C44.0785 18.1199 43.4281 17.0251 42.5801 16.0922C41.7505 15.1938 40.7357 14.4865 39.6057 14.019C38.3793 13.5233 37.0663 13.2771 35.7436 13.2948C34.4543 13.2829 33.1763 13.5358 31.9887 14.0378C30.8484 14.5221 29.8182 15.2328 28.9607 16.1271C28.0909 17.0362 27.406 18.1056 26.9438 19.2758C26.45 20.5272 26.2032 21.8624 26.217 23.2077C26.2017 24.5862 26.4418 25.9557 26.925 27.2468C27.3723 28.4363 28.0598 29.5209 28.9446 30.4331C29.8168 31.3306 30.8663 32.0367 32.0263 32.5063C33.2652 33.0013 34.5892 33.2483 35.9233 33.2331C37.2154 33.2417 38.4986 33.0201 39.713 32.5787C40.8535 32.1657 41.9055 31.5405 42.8135 30.7362C43.6866 29.9624 44.371 28.9991 44.8143 27.92L39.5333 26.5522C39.1317 27.1235 38.6052 27.5959 37.9938 27.9334C37.3739 28.2487 36.6857 28.4062 35.9903 28.3921C35.5303 28.4085 35.0715 28.3341 34.6403 28.173C34.2091 28.012 33.8138 27.7674 33.4773 27.4533C32.8139 26.8293 32.3669 25.9353 32.1362 24.7713H45.171L45.1656 23.492ZM32.1309 21.0781C32.3419 19.9678 32.7612 19.1113 33.3887 18.5087C33.7013 18.2089 34.0706 17.9745 34.475 17.8193C34.8794 17.6641 35.3107 17.5912 35.7436 17.6049C36.166 17.5917 36.5866 17.6651 36.9796 17.8205C37.3726 17.976 37.7296 18.2102 38.0287 18.5087C38.6295 19.1095 39.0246 19.966 39.2141 21.0781H32.1309Z"
                  fill="white"
                />
                <path
                  d="M60.4694 25.6886C60.2306 26.379 59.7801 26.9765 59.182 27.396C58.5839 27.8154 57.8687 28.0354 57.1383 28.0247C56.4418 28.0366 55.7598 27.8261 55.1911 27.4239C54.6059 26.9992 54.147 26.4235 53.8635 25.7583C53.5315 24.9873 53.3678 24.1543 53.3834 23.315C53.3697 22.4621 53.5389 21.6162 53.8796 20.8341C54.1674 20.1567 54.6246 19.5647 55.2072 19.1149C55.7655 18.7022 56.444 18.4845 57.1383 18.4954C57.8158 18.4858 58.4769 18.704 59.0157 19.1149C59.5858 19.565 60.0263 20.1582 60.2924 20.8341L65.8898 19.9142C65.6112 18.6289 65.0343 17.4271 64.2055 16.4061C63.3944 15.416 62.3642 14.6281 61.1962 14.1049C59.953 13.5543 58.6051 13.2798 57.2456 13.3003C55.926 13.2905 54.6183 13.5496 53.4022 14.062C52.2309 14.554 51.1749 15.2847 50.3017 16.2076C49.4193 17.1406 48.7221 18.2328 48.2473 19.426C47.743 20.6993 47.4907 22.0583 47.5044 23.4276C47.4894 24.7678 47.7363 26.098 48.2312 27.3434C48.6934 28.5041 49.3786 29.5629 50.2481 30.46C51.1119 31.3467 52.149 32.046 53.2949 32.5144C54.5039 33.0058 55.7984 33.2529 57.1034 33.2413C58.1595 33.245 59.2102 33.0894 60.2199 32.7799C61.1849 32.4917 62.0924 32.0379 62.902 31.4389C63.6876 30.8533 64.3702 30.1408 64.9216 29.3308C65.478 28.5115 65.8689 27.5913 66.0722 26.622L60.4694 25.6886Z"
                  fill="white"
                />
                <path
                  d="M91.0768 23.771V32.7022H96.8486V24.1384L91.0768 23.771ZM91.0768 6.20361V22.1028L96.8486 24.1063V6.20361H91.0768Z"
                  fill="white"
                />
                <path
                  d="M114.11 13.8206L113.968 15.9824C113.381 15.1355 112.589 14.4524 111.664 13.9976C110.684 13.5174 109.604 13.2748 108.513 13.2896C107.332 13.2788 106.163 13.5327 105.093 14.0325C104.045 14.5274 103.106 15.2257 102.331 16.0869C101.533 16.9722 100.908 17.9993 100.488 19.115C100.042 20.2912 99.8178 21.5396 99.8257 22.7974C99.8177 24.0068 100.034 25.2073 100.464 26.3377C100.873 27.4192 101.472 28.4185 102.234 29.288C102.967 30.1338 103.865 30.821 104.873 31.3075C105.884 31.7944 106.994 32.0431 108.116 32.0344C109.199 32.0454 110.271 31.8087 111.248 31.3424C112.188 30.8979 113.008 30.236 113.641 29.4113V30.865C113.657 31.6603 113.487 32.4484 113.145 33.1662C112.836 33.8043 112.35 34.3398 111.745 34.7084C111.108 35.0837 110.379 35.2741 109.639 35.2582C108.961 35.2713 108.29 35.1126 107.689 34.7969C107.129 34.4956 106.654 34.0573 106.308 33.5229L100.641 34.7271C101.105 35.7787 101.78 36.7243 102.623 37.5058C103.506 38.3166 104.542 38.943 105.67 39.3483C106.919 39.7977 108.239 40.0202 109.567 40.0054C110.935 40.0202 112.295 39.7782 113.574 39.292C114.738 38.8411 115.798 38.1566 116.688 37.2805C117.57 36.4069 118.259 35.3568 118.707 34.1988C119.194 32.9271 119.434 31.5746 119.415 30.2133V13.8206H114.11ZM113.188 24.8894C112.853 25.5203 112.358 26.0521 111.753 26.4316C111.138 26.802 110.434 26.9977 109.716 26.9977C108.998 26.9977 108.294 26.802 107.679 26.4316C107.075 26.0512 106.581 25.5195 106.246 24.8894C105.879 24.1982 105.694 23.4245 105.71 22.6419C105.697 21.8697 105.882 21.1071 106.246 20.4265C106.582 19.7976 107.076 19.2671 107.679 18.887C108.293 18.5149 108.997 18.3182 109.716 18.3182C110.434 18.3182 111.138 18.5149 111.753 18.887C112.357 19.2662 112.852 19.797 113.188 20.4265C113.551 21.1076 113.736 21.8699 113.724 22.6419C113.736 23.4251 113.549 24.1986 113.18 24.8894H113.188Z"
                  fill="white"
                />
                <path
                  d="M141.344 23.492C141.359 22.0694 141.129 20.6548 140.662 19.3107C140.248 18.1198 139.596 17.025 138.747 16.0922C137.918 15.1939 136.903 14.4865 135.773 14.019C134.547 13.523 133.234 13.2768 131.911 13.2949C130.622 13.2832 129.344 13.5361 128.156 14.0378C127.016 14.5228 125.986 15.2335 125.128 16.1271C124.257 17.0376 123.571 18.1088 123.108 19.2812C122.616 20.533 122.369 21.8679 122.382 23.2131C122.366 24.5919 122.607 25.9616 123.092 27.2522C123.539 28.4394 124.224 29.5221 125.107 30.4331C125.979 31.3306 127.028 32.0367 128.188 32.5063C129.427 33.0008 130.751 33.2477 132.085 33.2332C133.378 33.2415 134.662 33.0199 135.878 32.5788C137.017 32.1657 138.068 31.5405 138.975 30.7362C139.849 29.9619 140.534 28.9988 140.979 27.92L135.711 26.5522C135.309 27.1236 134.781 27.596 134.169 27.9335C133.55 28.2484 132.863 28.4059 132.168 28.3921C131.708 28.4088 131.249 28.3344 130.817 28.1734C130.385 28.0123 129.99 27.7676 129.653 27.4534C128.989 26.8293 128.542 25.9353 128.312 24.7713H141.349L141.344 23.492ZM128.306 21.0782C128.519 19.9678 128.938 19.1113 129.564 18.5088C129.877 18.2089 130.246 17.9745 130.65 17.8193C131.055 17.6641 131.486 17.5912 131.919 17.6049C132.341 17.5911 132.762 17.6642 133.155 17.8197C133.548 17.9751 133.905 18.2097 134.204 18.5088C134.808 19.1095 135.204 19.966 135.392 21.0782H128.306Z"
                  fill="white"
                />
                <path
                  d="M160.984 17.0605C160.483 15.9325 159.673 14.9692 158.648 14.2819C157.598 13.6069 156.37 13.2614 155.121 13.2895C153.983 13.2633 152.858 13.541 151.863 14.0942C150.939 14.6167 150.169 15.3734 149.631 16.2881L149.454 13.8099H144.149V32.6915H149.916V21.9928C149.906 21.3706 150.052 20.7558 150.339 20.2039C150.607 19.6908 151.005 19.2571 151.493 18.946C151.997 18.6332 152.581 18.473 153.174 18.4847C153.578 18.4666 153.98 18.5459 154.347 18.7158C154.714 18.8857 155.035 19.1413 155.282 19.4609C155.79 20.11 156.044 20.9897 156.044 22.1001V32.6915H161.818V21.2955C161.853 19.8398 161.569 18.3942 160.984 17.0605Z"
                  fill="white"
                />
              </g>
              <defs>
                <linearGradient
                  id="paint0_linear_519_130"
                  x1="46.009"
                  y1="21.8452"
                  x2="81.6147"
                  y2="-15.0577"
                  gradientUnits="userSpaceOnUse"
                >
                  <stop stopColor="#E900A9" />
                  <stop offset="0.13" stopColor="#E502AC" />
                  <stop offset="0.27" stopColor="#D806B5" />
                  <stop offset="0.42" stopColor="#C20EC5" />
                  <stop offset="0.58" stopColor="#A318DA" />
                  <stop offset="0.73" stopColor="#7D25F5" />
                  <stop offset="0.78" stopColor="#6F2AFF" />
                </linearGradient>
                <linearGradient
                  id="paint1_linear_519_130"
                  x1="57.6338"
                  y1="36.1236"
                  x2="92.3159"
                  y2="7.49401"
                  gradientUnits="userSpaceOnUse"
                >
                  <stop stopColor="#E900A9" />
                  <stop offset="0.13" stopColor="#E502AC" />
                  <stop offset="0.27" stopColor="#D806B5" />
                  <stop offset="0.42" stopColor="#C20EC5" />
                  <stop offset="0.58" stopColor="#A318DA" />
                  <stop offset="0.73" stopColor="#7D25F5" />
                  <stop offset="0.78" stopColor="#6F2AFF" />
                </linearGradient>
                <clipPath id="clip0_519_130">
                  <rect width="161.818" height="40" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </Link>

          {openMenu && <Navigation />}
          <MenuIcon isOpen={openMenu} onToggle={handleOpenMenu} />
        </div>
      </header>
    </>
  );
};

export default Header;
